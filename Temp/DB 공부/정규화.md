# DB 정규화


## 요약
### 정규화 기본 목표 
중복된 데이터를 허용하지 않는 것
- 이를 통해 무결성(Integrity)을 유지할 수 있습니다.
- DB 저장 용량도 줄일 수 있습니다.


### 제1 정규화 
- **다치 X**
- **한 칸엔 하나의 데이터만!**


#### 전
![img.png](정규화%20img/img.png)


#### 후
![img_1.png](정규화%20img/img_1.png)



### 제2 정규화  
- **쉽게 표현 : 현재 테이블의 주제와 관련없는 컬럼을 다른 테이블로 빼는 작업**
- 엄밀한 개념 : `Partial Dependency`를 제거한 테이블을 제2정규형 테이블이라고 한다.

```
제2 정규화란 제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것이다. 여기서 완전 함수 종속이라는 것은 기본키의 부분집합이 결정자가 되어선 안된다는 것을 의미한다.
```

#### 전
'수강등록현황' 테이블이라는 점을 고려해보면 `가격` 칼럼은 테이블의 원 주제와 상관이 별로 없습니다.
![img_2.png](정규화%20img/img_2.png)

#### 후 
![img_3.png](정규화%20img/img_3.png)

#### 장점
만약 헬스라는 프로그램의 가격을 7000원으로 수정하고 싶다고 가정해봅시다.
정규화 전에는 일일이 다 바꿔줘야 했지만, 정규화 후에는 `프로그램 테이블`에서 헬스의 가격 값 딱 하나만 바꾸면 돼서 굉장히 편리합니다.

#### 단점
관련된 데이터를 한눈에 볼 수 없습니다. 정규화해서 나눠놨기 때문에... 
한꺼번에 보려면 `JOIN`을 해서 데이터를 가져와야만 하는 번거로움이 존재합니다.


#### Partial Dependency를 제거한 테이블
Composite PK에 종속되는 칼럼(e.g. 가격)을 제거한 테이블
![img_5.png](정규화%20img/img_5.png)



### 제3 정규화
- **쉽게 표현 : 일반 컬럼에만 종속된 컬럼은 다른 테이블로 빼기**

#### 전
![img_6.png](정규화%20img/img_6.png)


#### 후
![img_7.png](정규화%20img/img_7.png)


- 엄밀한 개념 : 제2정규화를 진행한 테이블에 대해 '이행적 종속'을 없애도록 테이블을 분해하는 것입니다.
- 이행적 종속 : A -> B, B -> C 가 성립할 때 A -> C 가 성립되는 것을 의미합니다.

![img_8.png](정규화%20img/img_8.png)

#### 장점
수정이 편리합니다. 
제3 정규화 전에는 강사의 출신대학을 바꾸기 위해선 또 여러번 바꿔줘야 합니다.
그러나 정규화 후에는 딱 1번만 바꾸면 됩니다.

#### 단점
역시나 정규화의 단점은 데이터를 찢어놓는다는 점으로 인해 연관된 데이터를 보고 싶을 때 `JOIN`을 해야 하는 번거로움이 있습니다.





## Reference
- 코딩애플 : https://www.youtube.com/watch?v=Y1FbowQRcmI
- 망나니개발자 : https://mangkyu.tistory.com/110