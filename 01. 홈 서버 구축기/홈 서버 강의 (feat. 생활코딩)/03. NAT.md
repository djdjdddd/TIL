# 03. NAT

### NAT란? 
- Network Address Translation (네트워크 주소 변환)
- 공유기처럼 NAT 기능이 탑재된 장치는 네트워크 트래픽이 들어오고 나갈 때 주소를 변환합니다.
- 이 기술 덕분에 사설 IP를 쓰고 있는 각 컴퓨터들이 외부의 인터넷과 데이터를 주고 받을 수 있습니다.

IP 패킷에 적힌 소켓 주소의 포트 숫자와 소스 및 목적지의 IP 주소 등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술입니다.
패킷에 변화가 생기기 때문에 IP나 TCP/UDP의 체크섬(checksum)도 다시 계산되어 재기록해야 합니다. 
그렇기 때문에 네트워크의 성능(레이턴시)에 영향을 줄 수밖에 없습니다. (출처 : [나무위키](https://namu.wiki/w/NAT))


### 예시
실제 통신 과정에서 `NAT` 기능이 언제 어디서 일어나는지 알아보겠습니다. 

![image](https://github.com/djdjdddd/TIL/assets/126077503/c52b3578-b338-4c19-ba7e-a661b6fa3fc5)

- `192.168.0.4`라는 사설 IP를 부여받은 컴퓨터를 사용중인 제가 `naver.com`을 검색했다고 생각해봅시다.
- 그러면 가장 먼저 `192.168.0.4`에서 `192.168.0.1`(Gateway address 혹은 Router address)로 데이터를 보냅니다.
- 내부 네트워크가 아닌 외부 네트워크로 데이터를 보낸 것이므로 `WAN`을 통해 내보내는데... 보내기 전에 공유기가 2가지 작업을 합니다.
  - **IP 정보를 기억**
  - **NAT (사설 IP <-> 공인 IP 간의 Translation)**
- 이를 통해 응답이 왔을 때 요청했던 사설 IP로 다시 데이터를 보낼 수 있게 합니다.
